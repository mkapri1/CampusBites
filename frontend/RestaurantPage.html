<!DOCTYPE html>
<html>
  <style>
    #map {
      height: 400px;
      width: 100%;
      position: absolute;
    }
  </style>
  <head>
    <title>Campus Bites</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">
  <link rel = "stylesheet" href =style.css>
  </head>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC1vWNdPaZp9IMqqc2WttKU6rjgwnddiLo&callback=Function.prototype"></script>
  <script src = "script.js"></script>
  <body>
     <section>
      <div class="container header-container">
        <div class="logo">
          <img src="campusbites.png" alt="Logo" style="float:left; height: 80px;">
        </div>
        <nav class="header-nav">
          <ul>
            <li><a href="HomePage.html">Home</a></li>
            <li><a href="AboutUs.html">About Us</a></li>
          </ul>
        </nav>
     </section>
       
    <section id="pageBanner" class="page-banner bg-dark py-4 py-md-5">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <h1 class="h3 text-white m-0 p-0" align = "center">Restaurant Page</h1>
                </div>
            </div>
        </div>
    </section>
    <br><br> 
    <section>
        <div class = "headings">
            <h3 align = "center"> Moge Tee </h3>
        </div>
    </section>
    
    <section>
      <div class="slideshow-container-rp">
        <div class="mySlides">
          <img src="mogotea.jpeg" alt="front">
        </div>
        <div class="mySlides">
          <img src="mogotee2.jpeg" alt="menu">
        </div>
      </div>
    <script>
    var slideIndex = 1;
    showSlides();
    function showSlides() {
        var i;
        var slides = document.getElementsByClassName("mySlides");
        for (i = 1; i < slides.length; i++) {
        slides[i].style.display = "none";
        }
        slideIndex++;
        if (slideIndex > slides.length) {
        slideIndex = 1;
        }
        slides[slideIndex - 1].style.display = "block";
        setTimeout(showSlides, 3000); // Change image every 3 seconds
      }
    </script>
    </section>
    
    <section class="description">
      <div class="box1">
        <h3>Description</h3>
        <p> Want to grab some bubble tea or boba? Try Moge Tee which is located right near the campus! Möge Tee USA Franchise has built a strong foundation in the U.S. market. Their goal is to bring the Asian bubble tea phenomenon to a larger fan base. They want their “New-Style Tea” to break cultural boundaries and change perceptions about a beverage traditionally consumed by the older generation. Their products strive to be accessible to all communities across all demographics.</p>
      </div>
    </section>
    <section class="map">
      <div class="box1" onload="initMap()">
        <h3>Google Map</h3>
        <body>
          <div id="map"></div>
          <script src="script.js"></script>
        </body>
      </div>
    </section>
    <section class="reviews">
      <div class="box3">
                  <title>Customer Reviews</title>
            <style>
              br {
                display:block;
                margin-bottom: 0em;
              }
            </style>
          </head>
          <body>
            <h3>Customer Reviews</h3>
            
            <div id="reviews">
              <h2>Reviews for April 2023</h2>
              <ul>
                <li>5 stars</li>
                <li>4 stars</li>
                <li>3 stars</li>
                <li>2 stars</li>
                <li>1 stars</li>
              </ul>
              <p>Average rating: <span id="average">0</span> stars</p>
            </div>

            <div id="new-review">
              <h2>Add a review</h2>
              <form>
                <label for="name">Name:</label>
                <input type="text" id="name" name="name">
                <br style="line-height:40px">
                <label for="rating">Rating:</label>
                <input type="number" id="rating" name="rating" min="1" max="5">
                <br>
                <label for="comment">Comment:</label>
                <textarea id="comment" name="comment"></textarea>
                <br>
                <button type="submit">Submit</button>
              </form>
            </div>

            <script src="reviews.js"></script>
            <script>
              function reviews(){
                      //Examples
                  let reviews = [
                      { name: "Carlos",rating: 4, comment: "Great products!" },
                      { name: "Carlos",rating: 5, comment: "I love it!" },
                      { name: "Carlos",rating: 3, comment: "Not bad" }
                  ];
                  
                  //Calculate Averages
                  let totalRating = 0;
                  reviews.forEach((review) => {
                      totalRating += review.rating;
                  });
                  const averageRating = totalRating / reviews.length;
                  
                  // Update the average rating in the HTML
                  const averageSpan = document.querySelector('#average');
                  averageSpan.textContent = averageRating.toFixed(1);
                  
                  // Display the existing reviews
                  const reviewsUL = document.querySelector('#reviews ul');
                  reviews.forEach((review) => {
                      const li = document.createElement('li');
                      li.textContent = `${review.rating} stars - ${review.comment}`;
                      reviewsUL.appendChild(li);
                  });
                  
                  // Refresh New Form Submission Input
                  const form = document.querySelector('form');
                  form.addEventListener('submit', (event) => {
                      event.preventDefault();
                      
                      // Get the user's rating and comment
                      const ratingInput = document.querySelector('#rating');
                      const rating = parseInt(ratingInput.value);
                      const commentInput = document.querySelector('#comment');
                      const comment = commentInput.value;
                      
                      // Add the new review to the array
                      reviews.push({ rating: rating, comment: comment });
                      
                      // Create a new review element
                      const newReview = document.createElement('li');
                      newReview.textContent = `${rating} stars - ${comment}`;
                      
                      // Add the new review to the list
                      reviewsUL.appendChild(newReview);
                      
                      // Calculate the new average rating
                      const newTotalRating = totalRating + rating;
                      const newAverageRating = newTotalRating / reviews.length;
                      
                      // Update the average rating in the HTML
                      averageSpan.textContent = newAverageRating.toFixed(1);
                      
                      // Reset the form
                      ratingInput.value = '';
                      commentInput.value = '';
                  });
                  }

            function addComment() {
            // inputs
            var name = document.getElementById("name").value;
            var comment = document.getElementById("comment").value;

            // create comment element
            var commentElement = document.createElement("div");
            commentElement.classList.add("comment");
            commentElement.innerHTML = "<h3>" + name + "</h3><p>" + comment + "</p>";

            var commentsSection = document.getElementById("comments");
            commentsSection.appendChild(commentElement);

            // save comment in localStorage
            var comments = JSON.parse(localStorage.getItem("comments")) || [];
            comments.push({ name: name, comment: comment });
            localStorage.setItem("comments", JSON.stringify(comments));

            document.getElementById("name").value = "";
            document.getElementById("comment").value = "";
          }

          // retrieve comments from localStorage on page load
          window.onload = function() {
            var comments = JSON.parse(localStorage.getItem("comments")) || [];
            var commentsSection = document.getElementById("comments");
            comments.forEach(function(comment) {
              var commentElement = document.createElement("div");
              commentElement.classList.add("comment");
              commentElement.innerHTML = "<h3>" + comment.name + "</h3><p>" + comment.comment + "</p>";
              commentsSection.appendChild(commentElement);
            });
          };
          </script>
                </div>
    </section>
  </body>
</html>